apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: rosterhub

# Base configuration
bases:
  - ../../base

# Common labels for production
commonLabels:
  environment: production

# Patches for production environment
patchesStrategicMerge:
  - api-deployment-patch.yaml
  - configmap-patch.yaml
  - hpa-patch.yaml

# Images with production tags
images:
  - name: rosterhub/api
    newName: rosterhub/api
    newTag: v1.0.0  # Use semantic versioning for production

# ConfigMap overrides for production
configMapGenerator:
  - name: rosterhub-config
    behavior: merge
    literals:
      - log-level=warn
      - swagger-enabled=false
      - debug-http-logging=false
      - database-query-logging=false
      - cors-allowed-origins=https://rosterhub.example.com,https://app.rosterhub.example.com

# Replicas for production (high availability)
replicas:
  - name: rosterhub-api
    count: 3
