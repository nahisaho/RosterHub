apiVersion: v1
kind: ConfigMap
metadata:
  name: rosterhub-config
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "rosterhub.labels" . | nindent 4 }}
data:
  # Application Environment
  NODE_ENV: {{ .Values.config.nodeEnv | quote }}
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  SWAGGER_ENABLED: {{ .Values.config.swaggerEnabled | quote }}
  DEBUG_HTTP_LOGGING: {{ .Values.config.debugHttpLogging | quote }}
  DATABASE_QUERY_LOGGING: {{ .Values.config.databaseQueryLogging | quote }}

  # CORS Configuration
  CORS_ALLOWED_ORIGINS: {{ .Values.config.corsAllowedOrigins | quote }}

  # Rate Limiting
  RATE_LIMIT_DEFAULT: {{ .Values.config.rateLimitDefault | quote }}
  RATE_LIMIT_AUTH: {{ .Values.config.rateLimitAuth | quote }}
  RATE_LIMIT_MAX_FILE_SIZE: {{ .Values.config.rateLimitMaxFileSize | quote }}

  # Audit Logging
  AUDIT_LOG_RETENTION_DAYS: {{ .Values.config.auditLogRetentionDays | quote }}

  # File Upload Configuration
  FILE_UPLOAD_MAX_SIZE: {{ .Values.config.fileUploadMaxSize | quote }}
  FILE_UPLOAD_ALLOWED_MIME_TYPES: {{ .Values.config.fileUploadAllowedMimeTypes | quote }}

  # CSV Import Configuration
  CSV_IMPORT_MAX_ROWS: {{ .Values.config.csvImportMaxRows | quote }}
  CSV_IMPORT_CHUNK_SIZE: {{ .Values.config.csvImportChunkSize | quote }}

  # Bulk Operation Configuration
  BULK_OPERATION_MAX_ITEMS: {{ .Values.config.bulkOperationMaxItems | quote }}
  BULK_OPERATION_BATCH_SIZE: {{ .Values.config.bulkOperationBatchSize | quote }}

  # Webhook Configuration
  WEBHOOK_RETRY_ATTEMPTS: {{ .Values.config.webhookRetryAttempts | quote }}
  WEBHOOK_RETRY_DELAY: {{ .Values.config.webhookRetryDelay | quote }}
  WEBHOOK_TIMEOUT: {{ .Values.config.webhookTimeout | quote }}

  # Cache Configuration
  CACHE_ENABLED: {{ .Values.config.cacheEnabled | quote }}
  CACHE_TTL_DEFAULT: {{ .Values.config.cacheTtlDefault | quote }}
  CACHE_TTL_USERS: {{ .Values.config.cacheTtlUsers | quote }}
  CACHE_TTL_ORGS: {{ .Values.config.cacheTtlOrgs | quote }}

  # OneRoster Configuration
  ONEROSTER_VERSION: {{ .Values.config.onerosterVersion | quote }}
  ONEROSTER_PROFILE: {{ .Values.config.onerosterProfile | quote }}
  ONEROSTER_ENABLE_DELTA: {{ .Values.config.onerosterEnableDelta | quote }}
  ONEROSTER_DELTA_PAGE_SIZE: {{ .Values.config.onerosterDeltaPageSize | quote }}
